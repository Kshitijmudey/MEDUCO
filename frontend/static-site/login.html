<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5.0, user-scalable=yes">
    <meta name="theme-color" content="#3b82f6">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Login ‚Ä¢ MEDUCO</title>
    <link rel="stylesheet" href="styles.css">
  </head>
  <body>
    <header class="site-header">
      <div class="container header-inner">
        <a href="index.html" class="brand">MEDUCO</a>
        <nav class="nav" id="nav" style="display:none"></nav>
        <button aria-label="Toggle theme" class="theme-toggle" id="themeToggle" title="Toggle theme">
          <span class="theme-icon">üåô</span>
        </button>
        <button aria-label="Toggle menu" class="nav-toggle responsive-show" id="navToggle">
          <span></span><span></span><span></span>
        </button>
      </div>
    </header>

    <main>
      <section class="section">
        <div class="container" style="max-width:480px">
          <div style="margin-bottom: 16px; text-align: center;">
            <a href="index.html" style="color: var(--brand); text-decoration: none; display: inline-flex; align-items: center; gap: 8px;">
              ‚Üê Back to Home
            </a>
          </div>
          <h1 class="text-responsive-3xl">Login</h1>
          <p class="muted text-responsive-base">Choose a role and sign in or create a new account.</p>
          <div class="card">
            <div class="row" id="roleTabs" style="margin-top:8px">
              <button class="btn btn-outline text-responsive-base" data-role="patient">Patient</button>
              <button class="btn btn-outline text-responsive-base" data-role="doctor">Doctor</button>
            </div>
            <form class="form" id="loginForm" style="margin-top:12px">
              <div id="signupNameWrap" style="display:none">
                <input class="input text-responsive-base" name="fullName" placeholder="Full name">
              </div>
              <input class="input text-responsive-base" name="email" type="email" placeholder="Email" required>
              <input class="input text-responsive-base" name="password" type="password" placeholder="Password" required>
              <div id="confirmWrap" style="display:none">
                <input class="input text-responsive-base" name="confirm" type="password" placeholder="Confirm password">
              </div>
              <input type="hidden" name="role" id="roleInput" value="patient">
              <input type="hidden" name="mode" id="modeInput" value="signin">
              <button class="btn btn-primary text-responsive-base" id="submitBtn" type="submit">Sign In</button>
              <div style="text-align: center; margin-top: 12px;">
                <a href="#" onclick="showForgotPassword()" style="color: var(--brand); text-decoration: none; font-size: 14px;">Forgot Password?</a>
              </div>
              <div class="form-note" id="loginNote" role="status" aria-live="polite"></div>
            </form>
          </div>
          <div class="row" id="authTabs" style="margin-top:12px; justify-content:center">
            <button class="btn btn-primary text-responsive-base" data-mode="signin">Sign In</button>
            <button class="btn btn-outline text-responsive-base" data-mode="signup">Sign Up</button>
          </div>
        </div>
      </section>

      <!-- Forgot Password Modal -->
      <div id="forgotPasswordModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000;">
        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 32px; border-radius: 16px; max-width: 500px; width: 90%;">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
            <h2 style="margin: 0;">Reset Password</h2>
            <button onclick="closeForgotPassword()" style="background: none; border: none; font-size: 24px; cursor: pointer; color: var(--text-secondary);">√ó</button>
          </div>
          
          <p style="color: var(--text-secondary); margin-bottom: 24px; line-height: 1.6;">
            Enter your email address and we'll send you a link to reset your password.
          </p>
          
          <div class="form">
            <input class="input" id="resetEmail" type="email" placeholder="Enter your email address" required>
            <div style="margin-top: 16px;">
              <button class="btn btn-primary" onclick="sendResetLink()" style="width: 100%;">Send Reset Link</button>
            </div>
          </div>
          
          <div style="margin-top: 24px; text-align: center;">
            <button class="btn btn-outline" onclick="closeForgotPassword()">Cancel</button>
          </div>
        </div>
      </div>
    </main>

    <footer class="site-footer">
      <div class="container">
        ¬© <span id="year"></span> MEDUCO
      </div>
    </footer>

    <script src="script.js"></script>
    <script>
      // Forgot password functionality
      function showForgotPassword() {
        document.getElementById('forgotPasswordModal').style.display = 'block';
        document.getElementById('resetEmail').value = '';
      }

      function closeForgotPassword() {
        document.getElementById('forgotPasswordModal').style.display = 'none';
      }

      function sendResetLink() {
        const email = document.getElementById('resetEmail').value.trim();
        
        if (!email) {
          alert('Please enter your email address');
          return;
        }

        if (!isValidEmail(email)) {
          alert('Please enter a valid email address');
          return;
        }

        // In a real application, this would send a password reset email
        alert('Password reset link has been sent to ' + email + '. Please check your email and follow the instructions to reset your password.');
        closeForgotPassword();
      }

      function isValidEmail(email) {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return emailRegex.test(email);
      }

      // Close modal when clicking outside
      document.getElementById('forgotPasswordModal').addEventListener('click', function(e) {
        if (e.target === this) {
          closeForgotPassword();
        }
      });

      // Close modal with Escape key
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
          closeForgotPassword();
        }
      });
    </script>
  </body>
</html> 